<h1 id="url%20-%20comprehensive%20URL%20parsing">url - comprehensive URL parsing</h1>

<h1 id="API">API</h1>

<h2 id="representation">representation</h2>

<p>URLs are not purely character arrays: they&#8217;re composed of some important parts:</p>

<ul>
<li><p>domains</p></li>
<li><p>fragment</p></li>
<li><p>IP version</p></li>
<li><p>parameters</p></li>
<li><p>password</p></li>
<li><p>path</p></li>
<li><p>port</p></li>
<li><p>query</p></li>
<li><p>scheme</p></li>
<li><p>whether the scheme is a protocol</p></li>
<li><p>username</p></li>
</ul>

<p>In its string representation, a URL takes this form:</p>

<pre><code>[scheme:][//][user[:password]@][host[:port]][/path][;parameters][?query][#fragment]
</code></pre>

<h2 id="operations">operations</h2>

<ul>
<li><p>creation, optionally with an initialization string</p></li>
<li><p>conversion to a string representation</p></li>
<li><p>binding URLs A and B into a new URL</p></li>
</ul>

<h3 id="binding%20process">binding process</h3>

<p><em>parent refers to URL A</em></p>

<p><em>child refers to URL B</em></p>

<ol>
<li><p>begin with a copy of the child</p></li>
<li><p>if the child has no scheme</p>

<ul>
<li><p>use the parent&#8217;s scheme</p></li>
<li><p>set the &#8220;scheme is protocol&#8221; flag if either parent or child&#8217;s corresponding flag is true</p></li>
<li><p>if the child has no host</p></li>
<li><p>use the parent&#8217;s host</p></li>
<li><p>if the child has no port</p>

<ul>
<li>use the parent&#8217;s port</li>
</ul></li>
<li><p>if the child has no path, or the child&#8217;s path appears to be relative (not prefaced by &#8216;/&#8217;)</p>

<ul>
<li>join the parent&#8217;s path with the child&#8217;s path</li>
</ul></li>
</ul></li>
</ol>
